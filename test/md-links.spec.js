const init = require('../index');
const mockArgv = { _: [ 'test/README.mock.md' ] };
const mockArgvWithValidate = { _: [ 'test/README.mock.md' ], validate: 'true' };
const mockWithoutFile = { _: [], validate: 'true' };
const result = [{"href":"#1-preámbulo","text":"1. Preámbulo","file":"test/README.mock.md"},{"href":"#2-resumen-del-proyecto","text":"2. Resumen del proyecto","file":"test/README.mock.md"},{"href":"#3-objetivos-de-aprendizaje","text":"3. Objetivos de aprendizaje","file":"test/README.mock.md"},{"href":"#4-consideraciones-generales","text":"4. Consideraciones generales","file":"test/README.mock.md"},{"href":"#5-criterios-de-aceptación-mínimos-del-proyecto","text":"5. Criterios de aceptación mínimos del proyecto","file":"test/README.mock.md"},{"href":"#6-entregables","text":"6. Entregables","file":"test/README.mock.md"},{"href":"#7-hacker-edition","text":"7. Hacker edition","file":"test/README.mock.md"},{"href":"#8-pistas-tips-y-lecturas-complementarias","text":"8. Pistas, tips y lecturas complementarias","file":"test/README.mock.md"},{"href":"#9-checklist","text":"9. Checklist","file":"test/README.mock.md"},{"href":"https://es.wikipedia.org/wiki/Markdown","text":"Markdown","file":"test/README.mock.md"},{"href":"https://nodejs.org/","text":"Node.js","file":"test/README.mock.md"},{"href":"https://nodejs.org/es/","text":"Node.js","file":"test/README.mock.md"},{"href":"https://developers.google.com/v8/","text":"motor de JavaScript V8 de Chrome","file":"test/README.mock.md"},{"href":"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import","text":"<code>import</code>","file":"test/README.mock.md"},{"href":"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/export","text":"<code>export</code>","file":"test/README.mock.md"},{"href":"https://developer.mozilla.org/es/docs/Glossary/Callback_function","text":"Uso de callbacks.","file":"test/README.mock.md"},{"href":"https://scotch.io/tutorials/javascript-promises-for-dummies#toc-consuming-promises","text":"Consumo de Promesas.","file":"test/README.mock.md"},{"href":"https://www.freecodecamp.org/news/how-to-write-a-javascript-promise-4ed8d44292b8/","text":"Creación de Promesas.","file":"test/README.mock.md"},{"href":"https://nodejs.org/api/fs.html","text":"fs","file":"test/README.mock.md"},{"href":"https://nodejs.org/api/path.html","text":"path","file":"test/README.mock.md"},{"href":"https://www.npmjs.com/","text":"npm","file":"test/README.mock.md"},{"href":"https://nodejs.org/docs/latest-v0.10.x/api/modules.html","text":"(CommonJS)","file":"test/README.mock.md"},{"href":"https://docs.npmjs.com/files/package.json","text":"Configuración de package.json.","file":"test/README.mock.md"},{"href":"https://docs.npmjs.com/misc/scripts","text":"Configuración de npm-scripts","file":"test/README.mock.md"},{"href":"https://jestjs.io/docs/es-ES/getting-started","text":"Testeo unitario.","file":"test/README.mock.md"},{"href":"https://jestjs.io/docs/es-ES/asynchronous","text":"Testeo asíncrono.","file":"test/README.mock.md"},{"href":"https://jestjs.io/docs/es-ES/manual-mocks","text":"Uso de librerias de Mock.","file":"test/README.mock.md"},{"href":"https://nodejs.org/api/http.html#http_http_get_options_callback","text":"http.get","file":"test/README.mock.md"},{"href":"https://www.youtube.com/watch?v=lPPgY3HLlhQ","text":"Recursión.","file":"test/README.mock.md"},{"href":"https://jestjs.io/","text":"Jest","file":"test/README.mock.md"},{"href":"https://docs.npmjs.com/cli/install","text":"docs oficiales de <code>npm install</code> acá","file":"test/README.mock.md"},{"href":"https://github.com/Laboratoria/course-parser","text":"<code>course-parser</code>","file":"test/README.mock.md"},{"href":"https://github.com/markdown-it/markdown-it","text":"markdown-it","file":"test/README.mock.md"},{"href":"https://developer.mozilla.org/es/docs/Web/JavaScript/Guide/Regular_Expressions","text":"expresiones regulares (<code>RegExp</code>)","file":"test/README.mock.md"},{"href":"https://github.com/markedjs/marked","text":"marked","file":"test/README.mock.md"},{"href":"https://github.com/jsdom/jsdom","text":"JSDOM","file":"test/README.mock.md"},{"href":"https://github.com/cheeriojs/cheerio","text":"Cheerio","file":"test/README.mock.md"},{"href":"https://github.com/markedjs/marked","text":"marked","file":"test/README.mock.md"},{"href":"http://community.laboratoria.la/c/js","text":"foro de la comunidad","file":"test/README.mock.md"},{"href":"https://github.com/workshopper/learnyounode","text":"learnyounode","file":"test/README.mock.md"},{"href":"https://github.com/workshopper/how-to-npm","text":"how-to-npm","file":"test/README.mock.md"},{"href":"https://github.com/stevekane/promise-it-wont-hurt","text":"promise-it-wont-hurt","file":"test/README.mock.md"},{"href":"https://nodejs.org/es/about/","text":"Acerca de Node.js - Documentación oficial","file":"test/README.mock.md"},{"href":"https://nodejs.org/api/fs.html","text":"Node.js file system - Documentación oficial","file":"test/README.mock.md"},{"href":"https://nodejs.org/api/http.html#http_http_get_options_callback","text":"Node.js http.get - Documentación oficial","file":"test/README.mock.md"},{"href":"https://es.wikipedia.org/wiki/Node.js","text":"Node.js - Wikipedia","file":"test/README.mock.md"},{"href":"https://medium.freecodecamp.org/what-exactly-is-node-js-ae36e97449f5","text":"What exactly is Node.js? - freeCodeCamp","file":"test/README.mock.md"},{"href":"https://www.drauta.com/que-es-nodejs-y-para-que-sirve","text":"¿Qué es Node.js y para qué sirve? - drauta.com","file":"test/README.mock.md"},{"href":"https://www.youtube.com/watch?v=WgSc1nv_4Gw","text":"¿Qué es Nodejs? Javascript en el Servidor - Fazt en YouTube","file":"test/README.mock.md"},{"href":"https://www.ibm.com/developerworks/ssa/opensource/library/os-nodejs/index.html","text":"¿Simplemente qué es Node.js? - IBM Developer Works, 2011","file":"test/README.mock.md"},{"href":"https://www.genbeta.com/desarrollo/node-js-y-npm","text":"Node.js y npm","file":"test/README.mock.md"},{"href":"http://community.laboratoria.la/t/modulos-librerias-paquetes-frameworks-cual-es-la-diferencia/175","text":"Módulos, librerías, paquetes, frameworks... ¿cuál es la diferencia?","file":"test/README.mock.md"},{"href":"https://carlosazaustre.com/manejando-la-asincronia-en-javascript/","text":"Asíncronía en js","file":"test/README.mock.md"},{"href":"https://docs.npmjs.com/getting-started/what-is-npm","text":"NPM","file":"test/README.mock.md"},{"href":"https://docs.npmjs.com/getting-started/publishing-npm-packages","text":"Publicar packpage","file":"test/README.mock.md"},{"href":"https://docs.npmjs.com/getting-started/publishing-npm-packages","text":"Crear módulos en Node.js","file":"test/README.mock.md"},{"href":"https://nodejs.org/api/fs.html#fs_fs_readfile_path_options_callback","text":"Leer un archivo","file":"test/README.mock.md"},{"href":"https://nodejs.org/api/fs.html#fs_fs_readdir_path_options_callback","text":"Leer un directorio","file":"test/README.mock.md"},{"href":"https://nodejs.org/api/path.html","text":"Path","file":"test/README.mock.md"},{"href":"https://medium.com/netscape/a-guide-to-create-a-nodejs-command-line-package-c2166ad0452e","text":"Linea de comando CLI","file":"test/README.mock.md"}]
const resultWithLinks = [{"href":"#1-preámbulo","text":"1. Preámbulo","file":"test/README.mock.md","status":404,"ok":false},{"href":"#2-resumen-del-proyecto","text":"2. Resumen del proyecto","file":"test/README.mock.md","status":404,"ok":false},{"href":"#3-objetivos-de-aprendizaje","text":"3. Objetivos de aprendizaje","file":"test/README.mock.md","status":404,"ok":false},{"href":"#4-consideraciones-generales","text":"4. Consideraciones generales","file":"test/README.mock.md","status":404,"ok":false},{"href":"#5-criterios-de-aceptación-mínimos-del-proyecto","text":"5. Criterios de aceptación mínimos del proyecto","file":"test/README.mock.md","status":404,"ok":false},{"href":"#6-entregables","text":"6. Entregables","file":"test/README.mock.md","status":404,"ok":false},{"href":"#7-hacker-edition","text":"7. Hacker edition","file":"test/README.mock.md","status":404,"ok":false},{"href":"#8-pistas-tips-y-lecturas-complementarias","text":"8. Pistas, tips y lecturas complementarias","file":"test/README.mock.md","status":404,"ok":false},{"href":"#9-checklist","text":"9. Checklist","file":"test/README.mock.md","status":404,"ok":false},{"href":"https://es.wikipedia.org/wiki/Markdown","text":"Markdown","file":"test/README.mock.md","status":200,"ok":true},{"href":"https://nodejs.org/","text":"Node.js","file":"test/README.mock.md","status":200,"ok":true},{"href":"https://nodejs.org/es/","text":"Node.js","file":"test/README.mock.md","status":200,"ok":true},{"href":"https://developers.google.com/v8/","text":"motor de JavaScript V8 de Chrome","file":"test/README.mock.md","status":200,"ok":true},{"href":"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import","text":"<code>import</code>","file":"test/README.mock.md","status":200,"ok":true},{"href":"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/export","text":"<code>export</code>","file":"test/README.mock.md","status":200,"ok":true},{"href":"https://developer.mozilla.org/es/docs/Glossary/Callback_function","text":"Uso de callbacks.","file":"test/README.mock.md","status":200,"ok":true},{"href":"https://scotch.io/tutorials/javascript-promises-for-dummies#toc-consuming-promises","text":"Consumo de Promesas.","file":"test/README.mock.md","status":200,"ok":true},{"href":"https://www.freecodecamp.org/news/how-to-write-a-javascript-promise-4ed8d44292b8/","text":"Creación de Promesas.","file":"test/README.mock.md","status":200,"ok":true},{"href":"https://nodejs.org/api/fs.html","text":"fs","file":"test/README.mock.md","status":200,"ok":true},{"href":"https://nodejs.org/api/path.html","text":"path","file":"test/README.mock.md","status":200,"ok":true},{"href":"https://www.npmjs.com/","text":"npm","file":"test/README.mock.md","status":200,"ok":true},{"href":"https://nodejs.org/docs/latest-v0.10.x/api/modules.html","text":"(CommonJS)","file":"test/README.mock.md","status":200,"ok":true},{"href":"https://docs.npmjs.com/files/package.json","text":"Configuración de package.json.","file":"test/README.mock.md","status":200,"ok":true},{"href":"https://docs.npmjs.com/misc/scripts","text":"Configuración de npm-scripts","file":"test/README.mock.md","status":200,"ok":true},{"href":"https://jestjs.io/docs/es-ES/getting-started","text":"Testeo unitario.","file":"test/README.mock.md","status":200,"ok":true},{"href":"https://jestjs.io/docs/es-ES/asynchronous","text":"Testeo asíncrono.","file":"test/README.mock.md","status":200,"ok":true},{"href":"https://jestjs.io/docs/es-ES/manual-mocks","text":"Uso de librerias de Mock.","file":"test/README.mock.md","status":200,"ok":true},{"href":"https://nodejs.org/api/http.html#http_http_get_options_callback","text":"http.get","file":"test/README.mock.md","status":200,"ok":true},{"href":"https://www.youtube.com/watch?v=lPPgY3HLlhQ","text":"Recursión.","file":"test/README.mock.md","status":200,"ok":true},{"href":"https://jestjs.io/","text":"Jest","file":"test/README.mock.md","status":200,"ok":true},{"href":"https://docs.npmjs.com/cli/install","text":"docs oficiales de <code>npm install</code> acá","file":"test/README.mock.md","status":200,"ok":true},{"href":"https://github.com/Laboratoria/course-parser","text":"<code>course-parser</code>","file":"test/README.mock.md","status":200,"ok":true},{"href":"https://github.com/markdown-it/markdown-it","text":"markdown-it","file":"test/README.mock.md","status":200,"ok":true},{"href":"https://developer.mozilla.org/es/docs/Web/JavaScript/Guide/Regular_Expressions","text":"expresiones regulares (<code>RegExp</code>)","file":"test/README.mock.md","status":200,"ok":true},{"href":"https://github.com/markedjs/marked","text":"marked","file":"test/README.mock.md","status":200,"ok":true},{"href":"https://github.com/jsdom/jsdom","text":"JSDOM","file":"test/README.mock.md","status":200,"ok":true},{"href":"https://github.com/cheeriojs/cheerio","text":"Cheerio","file":"test/README.mock.md","status":200,"ok":true},{"href":"https://github.com/markedjs/marked","text":"marked","file":"test/README.mock.md","status":200,"ok":true},{"href":"http://community.laboratoria.la/c/js","text":"foro de la comunidad","file":"test/README.mock.md","status":200,"ok":true},{"href":"https://github.com/workshopper/learnyounode","text":"learnyounode","file":"test/README.mock.md","status":200,"ok":true},{"href":"https://github.com/workshopper/how-to-npm","text":"how-to-npm","file":"test/README.mock.md","status":200,"ok":true},{"href":"https://github.com/stevekane/promise-it-wont-hurt","text":"promise-it-wont-hurt","file":"test/README.mock.md","status":200,"ok":true},{"href":"https://nodejs.org/es/about/","text":"Acerca de Node.js - Documentación oficial","file":"test/README.mock.md","status":200,"ok":true},{"href":"https://nodejs.org/api/fs.html","text":"Node.js file system - Documentación oficial","file":"test/README.mock.md","status":200,"ok":true},{"href":"https://nodejs.org/api/http.html#http_http_get_options_callback","text":"Node.js http.get - Documentación oficial","file":"test/README.mock.md","status":200,"ok":true},{"href":"https://es.wikipedia.org/wiki/Node.js","text":"Node.js - Wikipedia","file":"test/README.mock.md","status":200,"ok":true},{"href":"https://medium.freecodecamp.org/what-exactly-is-node-js-ae36e97449f5","text":"What exactly is Node.js? - freeCodeCamp","file":"test/README.mock.md","status":200,"ok":true},{"href":"https://www.drauta.com/que-es-nodejs-y-para-que-sirve","text":"¿Qué es Node.js y para qué sirve? - drauta.com","file":"test/README.mock.md","status":200,"ok":true},{"href":"https://www.youtube.com/watch?v=WgSc1nv_4Gw","text":"¿Qué es Nodejs? Javascript en el Servidor - Fazt en YouTube","file":"test/README.mock.md","status":200,"ok":true},{"href":"https://www.ibm.com/developerworks/ssa/opensource/library/os-nodejs/index.html","text":"¿Simplemente qué es Node.js? - IBM Developer Works, 2011","file":"test/README.mock.md","status":200,"ok":true},{"href":"https://www.genbeta.com/desarrollo/node-js-y-npm","text":"Node.js y npm","file":"test/README.mock.md","status":200,"ok":true},{"href":"http://community.laboratoria.la/t/modulos-librerias-paquetes-frameworks-cual-es-la-diferencia/175","text":"Módulos, librerías, paquetes, frameworks... ¿cuál es la diferencia?","file":"test/README.mock.md","status":200,"ok":true},{"href":"https://carlosazaustre.com/manejando-la-asincronia-en-javascript/","text":"Asíncronía en js","file":"test/README.mock.md","status":404,"ok":false},{"href":"https://docs.npmjs.com/getting-started/what-is-npm","text":"NPM","file":"test/README.mock.md","status":200,"ok":true},{"href":"https://docs.npmjs.com/getting-started/publishing-npm-packages","text":"Publicar packpage","file":"test/README.mock.md","status":200,"ok":true},{"href":"https://docs.npmjs.com/getting-started/publishing-npm-packages","text":"Crear módulos en Node.js","file":"test/README.mock.md","status":200,"ok":true},{"href":"https://nodejs.org/api/fs.html#fs_fs_readfile_path_options_callback","text":"Leer un archivo","file":"test/README.mock.md","status":200,"ok":true},{"href":"https://nodejs.org/api/fs.html#fs_fs_readdir_path_options_callback","text":"Leer un directorio","file":"test/README.mock.md","status":200,"ok":true},{"href":"https://nodejs.org/api/path.html","text":"Path","file":"test/README.mock.md","status":200,"ok":true},{"href":"https://medium.com/netscape/a-guide-to-create-a-nodejs-command-line-package-c2166ad0452e","text":"Linea de comando CLI","file":"test/README.mock.md","status":200,"ok":true}]

describe('mdLinks', () => {

  it('Should return file Path', () => {
    const value = init.getFilePath(mockArgv);
    expect(value).toBe('test/README.mock.md');
  });

  it('Should return false value', () => {
    const value = init.getValidateTag(mockArgv);
    expect(value).toBe(false);
  });

  it('Should return true value', () => {
    const value = init.getValidateTag(mockArgvWithValidate);
    expect(value).toBe(true);
  });

  it('Should return an error about the File is missing', () => {
    const value = init.main(mockWithoutFile);
    expect(value).rejects.toThrowError('You must provide a file to find links');
  });

  it('Should resolve the promise', () => {
    const value = init.main(mockArgv);
    expect(value).resolves.toEqual(result);
  });

  it('Should resolve the promise with links', () => {
    const value = init.main(mockArgvWithValidate);
    expect(value).resolves.toEqual(resultWithLinks);
  });

});
